<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Japanese Courses - Nihongo Sekai</title>
    <meta
      name="description"
      content="Explore our comprehensive Japanese language courses. From beginner to advanced, find the perfect course for your learning journey."
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css" />

    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AZ8hJJ6CzEWBmq8wJnKnHsJE4BQBY7-8XpFdxHpQ_bnGJf5xMYcNgKMQJV8rCp7JoQGXGnKKzV9KJ9qN&currency=USD"></script>

    <!-- Favicon -->
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéå</text></svg>"
    />
  </head>
  <body class="courses-page">
    <!-- Navigation Header -->
    <header class="header">
      <nav class="navbar">
        <div class="container">
          <div class="nav-brand">
            <a href="index.html" class="brand-link">
              <span class="brand-icon">Êó•</span>
              <span class="brand-text">
                <span class="brand-nihongo">Nihongo</span>
                <span class="brand-sekai">Sekai</span>
              </span>
            </a>
          </div>

          <div class="nav-menu" id="navMenu">
            <ul class="nav-list">
              <li><a href="index.html" class="nav-link">Home</a></li>
              <li>
                <a href="courses.html" class="nav-link active">Courses</a>
              </li>
              <li><a href="classrooms.html" class="nav-link">Classrooms</a></li>
              <li><a href="partners.html" class="nav-link">Partners</a></li>
              <li><a href="about.html" class="nav-link">About</a></li>
            </ul>
          </div>

          <div class="nav-actions">
            <a href="login.html" class="btn btn-outline">Sign In</a>
            <a href="register.html" class="btn btn-primary">Get Started</a>
          </div>

          <button class="nav-toggle" id="navToggle">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main>
      <!-- Enhanced Hero Section with Gradient & Sakura Petals -->
      <section class="enhanced-hero">
        <div class="sakura-container" id="sakuraContainer">
          <!-- Sakura petals will be generated by JavaScript -->
        </div>
        <div class="container">
          <div class="enhanced-hero-content">
            <h1 class="enhanced-hero-title">Master Japanese Language</h1>
            <p class="enhanced-hero-subtitle">
              Discover our comprehensive collection of Japanese courses designed
              by experts. From complete beginners to advanced learners, find
              your perfect learning path with our structured curriculum.
            </p>
            <div class="enhanced-hero-stats">
              <div class="enhanced-stat">
                <span class="enhanced-stat-number">12+</span>
                <span class="enhanced-stat-label">Expert Courses</span>
              </div>
              <div class="enhanced-stat">
                <span class="enhanced-stat-number">5,000+</span>
                <span class="enhanced-stat-label">Active Students</span>
              </div>
              <div class="enhanced-stat">
                <span class="enhanced-stat-number">4.9</span>
                <span class="enhanced-stat-label">Average Rating</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Static Search & Filter Section -->
      <section class="static-search-section" id="searchSection">
        <div class="container">
          <!-- Enhanced Search Bar with Autocomplete -->
          <div class="enhanced-search-bar" style="position: relative">
            <input
              type="text"
              id="courseSearch"
              placeholder="Search Japanese courses..."
              class="enhanced-search-input"
              autocomplete="off"
            />
            <svg
              class="enhanced-search-icon"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <!-- Autocomplete Dropdown -->
            <div
              id="autocompleteDropdown"
              class="autocomplete-dropdown"
              style="display: none"
            >
              <!-- Suggestions will be populated here -->
            </div>
          </div>

          <!-- Filter Pills -->
          <div class="filter-pills">
            <div class="filter-pill" data-filter="category">
              <select id="categoryFilter">
                <option value="">All Categories</option>
                <option value="grammar">Grammar</option>
                <option value="vocabulary">Vocabulary</option>
                <option value="conversation">Conversation</option>
                <option value="reading">Reading</option>
                <option value="writing">Writing</option>
                <option value="culture">Culture</option>
                <option value="business">Business</option>
                <option value="jlpt">JLPT</option>
              </select>
            </div>

            <div class="filter-pill" data-filter="level">
              <select id="levelFilter">
                <option value="">All Levels</option>
                <option value="Beginner">Beginner</option>
                <option value="Elementary">Elementary</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Advanced">Advanced</option>
              </select>
            </div>

            <div class="filter-pill" data-filter="price">
              <select id="priceFilter">
                <option value="">All Prices</option>
                <option value="0-50">Under $50</option>
                <option value="50-100">$50 - $100</option>
                <option value="100-150">$100 - $150</option>
                <option value="150+">$150+</option>
              </select>
            </div>

            <div class="filter-pill" data-filter="sort">
              <select id="sortFilter">
                <option value="popular">Most Popular</option>
                <option value="rating">Highest Rated</option>
                <option value="newest">Newest</option>
                <option value="price-low">Price: Low to High</option>
                <option value="price-high">Price: High to Low</option>
              </select>
            </div>

            <button class="clear-filters-btn" id="clearFilters">
              Clear All
            </button>
          </div>
        </div>
      </section>

      <!-- Enhanced Courses Main Section -->
      <section class="courses-main">
        <div class="container">
          <!-- Results Summary -->
          <div style="text-align: center; margin-bottom: var(--spacing-xl)">
            <span
              id="resultsCount"
              style="
                font-size: 1.125rem;
                color: var(--color-gray-600);
                font-weight: 500;
              "
              >Loading courses...</span
            >
          </div>

          <!-- Enhanced Course Cards (6/page) -->
          <div class="enhanced-cards-grid" id="coursesGrid">
            <!-- Courses will be loaded dynamically -->
          </div>

          <!-- Enhanced Pill-style Pagination -->
          <div class="enhanced-pagination" id="paginationWrapper">
            <button class="pagination-btn" id="prevPage" disabled>
              <svg
                viewBox="0 0 24 24"
                fill="currentColor"
                style="width: 16px; height: 16px"
              >
                <polyline points="15,18 9,12 15,6" />
              </svg>
              Previous
            </button>

            <div
              id="paginationNumbers"
              style="display: flex; gap: var(--spacing-sm)"
            >
              <!-- Page numbers will be generated dynamically -->
            </div>

            <button class="pagination-btn" id="nextPage">
              Next
              <svg
                viewBox="0 0 24 24"
                fill="currentColor"
                style="width: 16px; height: 16px"
              >
                <polyline points="9,18 15,12 9,6" />
              </svg>
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="footer-brand">
              <span class="brand-icon">Êó•</span>
              <span class="brand-text">
                <span class="brand-nihongo">Nihongo</span>
                <span class="brand-sekai">Sekai</span>
              </span>
            </div>
            <p class="footer-description">
              Master Japanese with confidence through our comprehensive learning
              platform designed for global learners.
            </p>
            <div class="footer-social">
              <a href="#" class="social-link" aria-label="Facebook">üìò</a>
              <a href="#" class="social-link" aria-label="Twitter">üê¶</a>
              <a href="#" class="social-link" aria-label="Instagram">üì∑</a>
              <a href="#" class="social-link" aria-label="LinkedIn">üíº</a>
            </div>
          </div>

          <div class="footer-section">
            <h3 class="footer-title">Learn</h3>
            <ul class="footer-links">
              <li><a href="courses.html">Courses</a></li>
              <li><a href="classrooms.html">Live Classes</a></li>
              <li><a href="partners.html">Partners</a></li>
              <li><a href="pricing.html">Pricing</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3 class="footer-title">Company</h3>
            <ul class="footer-links">
              <li><a href="about.html">About Us</a></li>
              <li><a href="careers.html">Careers</a></li>
              <li><a href="press.html">Press</a></li>
              <li><a href="partners.html">Partners</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3 class="footer-title">Support</h3>
            <ul class="footer-links">
              <li><a href="help.html">Help Center</a></li>
              <li><a href="contact.html">Contact Us</a></li>
              <li><a href="community.html">Community</a></li>
              <li><a href="blog.html">Blog</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3 class="footer-title">Legal</h3>
            <ul class="footer-links">
              <li><a href="privacy.html">Privacy Policy</a></li>
              <li><a href="terms.html">Terms of Service</a></li>
              <li><a href="cookie-policy.html">Cookie Policy</a></li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <div class="footer-bottom-content">
            <p class="footer-copyright">
              ¬© 2024 Nihongo Sekai. All rights reserved.
            </p>
            <div class="footer-bottom-links">
              <a href="privacy.html">Privacy</a>
              <a href="terms.html">Terms</a>
              <a href="cookie-policy.html">Cookies</a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Enhanced Scripts -->
    <script src="script.js"></script>
    <script>
      // Enhanced Courses Page Functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize sakura petals animation
        initializeSakuraPetals();

        // Mock course data (admin-created courses)
        const courses = [
          {
            id: 1,
            title: "Complete Japanese for Beginners",
            description:
              "Start your Japanese journey with hiragana, katakana, and basic grammar concepts.",
            image:
              "https://images.unsplash.com/photo-1528164344705-47542687000d?w=400&h=300&fit=crop",
            level: "Beginner",
            category: "grammar",
            price: 49,
            duration: "8 weeks",
            students: 1205,
            rating: 4.8,
            lessons: 24,
            instructor: "Admin Team",
          },
          {
            id: 2,
            title: "Japanese Grammar Mastery",
            description:
              "Deep dive into Japanese grammar structures and patterns for intermediate learners.",
            image:
              "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=400&h=300&fit=crop",
            level: "Intermediate",
            category: "grammar",
            price: 89,
            duration: "12 weeks",
            students: 856,
            rating: 4.9,
            lessons: 36,
            instructor: "Admin Team",
          },
          {
            id: 3,
            title: "Business Japanese Essentials",
            description:
              "Professional Japanese for workplace communication and business contexts.",
            image:
              "https://images.unsplash.com/photo-1551434678-e076c223a692?w=400&h=300&fit=crop",
            level: "Advanced",
            category: "business",
            price: 129,
            duration: "10 weeks",
            students: 423,
            rating: 4.7,
            lessons: 30,
            instructor: "Admin Team",
          },
          {
            id: 4,
            title: "JLPT N5 Preparation",
            description:
              "Complete preparation course for the Japanese Language Proficiency Test N5 level.",
            image:
              "https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=400&h=300&fit=crop",
            level: "Beginner",
            category: "jlpt",
            price: 79,
            duration: "16 weeks",
            students: 2103,
            rating: 4.9,
            lessons: 48,
            instructor: "Admin Team",
          },
          {
            id: 5,
            title: "Japanese Conversation Practice",
            description:
              "Improve your speaking skills with practical conversation scenarios and role-plays.",
            image:
              "https://images.unsplash.com/photo-1577563908411-5077b6dc7624?w=400&h=300&fit=crop",
            level: "Intermediate",
            category: "conversation",
            price: 69,
            duration: "8 weeks",
            students: 734,
            rating: 4.6,
            lessons: 24,
            instructor: "Admin Team",
          },
          {
            id: 6,
            title: "Kanji Mastery Course",
            description:
              "Systematic approach to learning and remembering Japanese kanji characters.",
            image:
              "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400&h=300&fit=crop",
            level: "Elementary",
            category: "writing",
            price: 59,
            duration: "20 weeks",
            students: 1567,
            rating: 4.8,
            lessons: 60,
            instructor: "Admin Team",
          },
        ];

        let filteredCourses = [...courses];
        let currentPage = 1;
        const coursesPerPage = 6;
        const userPurchases = ["1", "4"]; // Mock purchased courses

        // Initialize page
        initializePage();

        function initializePage() {
          renderCourses();
          setupEventListeners();
          updateResultsCount();
          setupPagination();
          setupAutocomplete();
        }

        function initializeSakuraPetals() {
          const sakuraContainer = document.getElementById("sakuraContainer");

          // Create 9 sakura petals
          for (let i = 1; i <= 9; i++) {
            const petal = document.createElement("div");
            petal.className = "sakura-petal";
            sakuraContainer.appendChild(petal);
          }
        }

        function setupEventListeners() {
          // Search functionality
          document
            .getElementById("courseSearch")
            .addEventListener("input", handleSearch);

          // Filter functionality with hover behavior
          setupFilterHoverBehavior();
          document
            .getElementById("categoryFilter")
            .addEventListener("change", handleFilters);
          document
            .getElementById("levelFilter")
            .addEventListener("change", handleFilters);
          document
            .getElementById("priceFilter")
            .addEventListener("change", handleFilters);
          document
            .getElementById("sortFilter")
            .addEventListener("change", handleFilters);

          // Clear filters
          document
            .getElementById("clearFilters")
            .addEventListener("click", clearAllFilters);

          // Update filter chip states
          document.querySelectorAll(".filter-pill select").forEach((select) => {
            select.addEventListener("change", updateFilterChipState);
          });
        }

        function setupFilterHoverBehavior() {
          document.querySelectorAll(".filter-pill").forEach((pill) => {
            const select = pill.querySelector("select");

            pill.addEventListener("mouseenter", () => {
              if (select && !select.disabled) {
                select.focus();
              }
            });
          });
        }

        function handleSearch(e) {
          const searchTerm = e.target.value.toLowerCase();
          filteredCourses = courses.filter(
            (course) =>
              course.title.toLowerCase().includes(searchTerm) ||
              course.description.toLowerCase().includes(searchTerm) ||
              course.category.toLowerCase().includes(searchTerm),
          );
          applyFiltersAndSort();
          currentPage = 1;
          renderCourses();
          updateResultsCount();
          setupPagination();
        }

        function handleFilters() {
          applyFiltersAndSort();
          currentPage = 1;
          renderCourses();
          updateResultsCount();
          setupPagination();
          updateClearButton();
        }

        function applyFiltersAndSort() {
          const category = document.getElementById("categoryFilter").value;
          const level = document.getElementById("levelFilter").value;
          const priceRange = document.getElementById("priceFilter").value;
          const sortBy = document.getElementById("sortFilter").value;

          // Apply filters
          filteredCourses = courses.filter((course) => {
            const matchesSearch =
              !document.getElementById("courseSearch").value ||
              course.title
                .toLowerCase()
                .includes(
                  document.getElementById("courseSearch").value.toLowerCase(),
                ) ||
              course.description
                .toLowerCase()
                .includes(
                  document.getElementById("courseSearch").value.toLowerCase(),
                );

            const matchesCategory = !category || course.category === category;
            const matchesLevel = !level || course.level === level;

            let matchesPrice = true;
            if (priceRange) {
              const [min, max] = priceRange
                .split("-")
                .map((p) => (p === "+" ? Infinity : parseInt(p)));
              matchesPrice =
                course.price >= min &&
                (max === undefined || course.price <= max);
            }

            return (
              matchesSearch && matchesCategory && matchesLevel && matchesPrice
            );
          });

          // Apply sorting
          switch (sortBy) {
            case "rating":
              filteredCourses.sort((a, b) => b.rating - a.rating);
              break;
            case "newest":
              filteredCourses.sort((a, b) => b.id - a.id);
              break;
            case "price-low":
              filteredCourses.sort((a, b) => a.price - b.price);
              break;
            case "price-high":
              filteredCourses.sort((a, b) => b.price - a.price);
              break;
            default: // popular
              filteredCourses.sort((a, b) => b.students - a.students);
          }
        }

        function clearAllFilters() {
          document.getElementById("courseSearch").value = "";
          document.getElementById("categoryFilter").value = "";
          document.getElementById("levelFilter").value = "";
          document.getElementById("priceFilter").value = "";
          document.getElementById("sortFilter").value = "popular";

          filteredCourses = [...courses];
          applyFiltersAndSort();
          currentPage = 1;
          renderCourses();
          updateResultsCount();
          setupPagination();
          updateClearButton();
          updateFilterChipStates();
        }

        function updateFilterChipState(e) {
          const pill = e.target.closest(".filter-pill");
          if (e.target.value) {
            pill.classList.add("active");
          } else {
            pill.classList.remove("active");
          }
          updateClearButton();
        }

        function updateFilterChipStates() {
          document.querySelectorAll(".filter-pill").forEach((pill) => {
            const select = pill.querySelector("select");
            if (select.value) {
              pill.classList.add("active");
            } else {
              pill.classList.remove("active");
            }
          });
        }

        function updateClearButton() {
          const hasActiveFilters =
            document.getElementById("courseSearch").value ||
            document.getElementById("categoryFilter").value ||
            document.getElementById("levelFilter").value ||
            document.getElementById("priceFilter").value ||
            document.getElementById("sortFilter").value !== "popular";

          const clearBtn = document.getElementById("clearFilters");
          if (hasActiveFilters) {
            clearBtn.classList.add("visible");
          } else {
            clearBtn.classList.remove("visible");
          }
        }

        function setupAutocomplete() {
          if (window.NihongoSekai && window.NihongoSekai.setupAutocomplete) {
            window.NihongoSekai.setupAutocomplete();
          }
        }

        function renderCourses() {
          const startIndex = (currentPage - 1) * coursesPerPage;
          const endIndex = startIndex + coursesPerPage;
          const coursesToShow = filteredCourses.slice(startIndex, endIndex);

          const gridContainer = document.getElementById("coursesGrid");
          gridContainer.innerHTML = coursesToShow
            .map((course) => {
              const isPurchased = userPurchases.includes(course.id.toString());
              return `
                <div class="enhanced-card" data-course-id="${course.id}">
                  <div class="enhanced-card-image">
                    <img src="${course.image}" alt="${course.title}" loading="lazy">
                    <div class="level-badge">${course.level}</div>
                    ${isPurchased ? '<div class="purchased-badge">Purchased</div>' : ""}
                    <div class="card-overlay">
                      <a href="course-detail.html?id=${course.id}" class="overlay-button">
                        View Details
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <polyline points="9,18 15,12 9,6"></polyline>
                        </svg>
                      </a>
                    </div>
                  </div>
                  <div class="enhanced-card-content">
                    <h3 class="enhanced-card-title">${course.title}</h3>
                    <p class="enhanced-card-description">${course.description}</p>

                    <div class="instructor-info" onclick="viewInstructorProfile('${course.instructor}')">
                      <div class="instructor-avatar">
                        ${course.instructor
                          .split(" ")
                          .map((n) => n[0])
                          .join("")
                          .toUpperCase()}
                      </div>
                      <span class="instructor-name">${course.instructor}</span>
                    </div>

                    <div class="card-stats">
                      <div class="stats-left">
                        <div class="stat-item">
                          <span>üìπ ${course.lessons} lessons</span>
                        </div>
                        <div class="stat-item">
                          <span>üë• ${course.students.toLocaleString()}</span>
                        </div>
                      </div>
                      <div class="rating-display">
                        <div class="stars">${generateStars(course.rating)}</div>
                        <span>${course.rating}</span>
                      </div>
                    </div>
                  </div>
                </div>
              `;
            })
            .join("");
        }

        function generateStars(rating) {
          const fullStars = Math.floor(rating);
          const hasHalfStar = rating % 1 >= 0.5;
          let stars = "";

          for (let i = 0; i < fullStars; i++) {
            stars += "‚òÖ";
          }

          if (hasHalfStar) {
            stars += "‚òÜ";
          }

          return stars;
        }

        function updateResultsCount() {
          const count = filteredCourses.length;
          const countElement = document.getElementById("resultsCount");
          countElement.textContent = `${count} ${count === 1 ? "course" : "courses"} found`;
        }

        function setupPagination() {
          const totalPages = Math.ceil(filteredCourses.length / coursesPerPage);
          const paginationNumbers =
            document.getElementById("paginationNumbers");
          const prevBtn = document.getElementById("prevPage");
          const nextBtn = document.getElementById("nextPage");

          // Update button states
          prevBtn.disabled = currentPage === 1;
          nextBtn.disabled = currentPage === totalPages || totalPages === 0;

          // Generate page numbers
          paginationNumbers.innerHTML = "";
          for (let i = 1; i <= totalPages; i++) {
            const pageBtn = document.createElement("button");
            pageBtn.textContent = i;
            pageBtn.className = `pagination-number ${i === currentPage ? "active" : ""}`;
            pageBtn.addEventListener("click", () => goToPage(i));
            paginationNumbers.appendChild(pageBtn);
          }

          // Pagination navigation
          prevBtn.onclick = () => goToPage(currentPage - 1);
          nextBtn.onclick = () => goToPage(currentPage + 1);
        }

        function goToPage(page) {
          const totalPages = Math.ceil(filteredCourses.length / coursesPerPage);
          if (page < 1 || page > totalPages) return;

          currentPage = page;
          renderCourses();
          setupPagination();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }

        // Global function for instructor profile viewing
        window.viewInstructorProfile = function (instructor) {
          // In a real app, this would navigate to instructor profile page
          console.log(`Viewing profile for: ${instructor}`);
          // For now, just show a message since these are admin-created courses
          if (instructor === "Admin Team") {
            alert("This course was created by our expert admin team.");
          }
        };

        // Initialize filter chip states and clear button
        updateFilterChipStates();
        updateClearButton();
      });
    </script>
  </body>
</html>
